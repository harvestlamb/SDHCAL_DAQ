# 10bitDAC

+ DAC输出电压
  $$V_{out} = V_{ref} + \frac {80k\times I_{ref}}{256}\left[B(0)\times 2^9 + B(1) \times 2^8 + ... + B(9)\right]$$
+ $V_{ref} = 0.84V​$，$I_{ref} = 7.8\mu A​$，外部电阻配置
+ 也就是每个DAC的码值对应的电压是$2.4375mV$
+ 这样子计算出来，这个ADC输出信号的范围应该是：$0.84V\sim3.333V$
+ 而芯片手册上给的范围却是：$0.84V\sim2.9V$

## 测试10-bit DAC码值和输出电压的关系
+ 通过测试反推确定$I_{ref}$
+ 考虑到输出范围不同，较高的码值输出的结果可能是不准确的
+ 码值范围$0,000,000,000\sim1,111,111,111$总共1024个码值，测8个码值点比较合适
+ 码值：
  $$0,127,255,383,511,639,767,895,1023$$
  即：
  $$0000,007F,00FF,017F,01FF,027F,02FF,037F$$
+ 对应的$V_{th0},V_{th1},V_{th2}$的命令分别为：
| 码值   | Vth0\测量值(V)    | Vth1\测量值(V)    | Vth2\测量值(V)    |
| ---- | -------------- | -------------- | -------------- |
| 0    | C000    $0.82$ | C400    $0.81$ | C800    $0.81$ |
| 127  | C3F8    $1.09$ | C7F8    $1.08$ | CBF8    $1.08$ |
| 255  | C3FC    $1.37$ | C7FC    $1.35$ | CBFC    $1.36$ |
| 383  | C3FA    $1.65$ | C7FA    $1.62$ | CBFA    $1.63$ |
| 511  | C3FE    $1.92$ | C7FE    $1.90$ | CBFE    $1.91$ |
| 639  | C3F9    $2.20$ | C7F9    $2.17$ | CBF9    $2.18$ |
| 767  | C3FD    $2.47$ | C7FD    $2.44$ | CBFD    $2.45$ |
| 895  | C3FB    $2.66$ | C7FB    $2.71$ | CBFB    $2.72$ |
| 1023 | C3FF    $2.67$ | C7FF    $2.98$ | CBFF    $3.00$ |

根据测量值做线性拟合，如下图

![Vth0](http://i.imgur.com/XUpyUbs.jpg)



![Vth1](http://i.imgur.com/XZWk6JK.jpg)



![Vth2](http://i.imgur.com/hRx9Ijq.jpg)

+ Vth0在设置电压值为满幅度时有一个较大的偏差，Code设置为895和1024测量到的电压没有变化
+ Vth0,Vth1,Vth2在Code设置为639时输出值变小

|      |      |      |
| ---- | ---- | ---- |
|      |      |      |
|      |      |      |
|      |      |      |



