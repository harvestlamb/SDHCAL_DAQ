# **上位机命令集合**

​

## A类：配置参数，设置好之后基本不需改动

+ A0A0:输出SC参数

+ A0A1:输出Read Register参数

+ A0BX:Microroc片数

+ A0C0:High gain shaper 输出

+ A0C1:Low gain shaper 输出

+ A0D0:Disable Selected shaper output OTA

+ A0D1:Enable Selected shaper output OTA

+ A1XX:使能XX通道Ctest

+ A2XX:选通XX通道Read register

+ A3A0:Power pulse unenable

+ A3A1:Power pulse enable

+ A4A0:select channel 2 to readout

+ A4A1:select channel 1 to readout

+ A5AX:

+ A6XX:

+ A7A1:清零Gray Counter

+ > 新添加的命令20170309

+ A8A0:Enable internal raz_chn and disable external raz_chn

+ A8A1:Disable internal raz_chn and enable external raz_chn

+ A8BX:X --> Internal RAZ mode select

+ A8CX:X --> External RAZ mode select

+ A8DX:X*25ns --> External RAZ delay time:delay time指的是trigger输出之后，多长时间之后FPGA才开始输出RAZ信号

+ > 新添加的命令结束20170309

+ A9A0:External trigger unenable

+ A9A1:External trigger enable

+ > 这条命令没用了AAAX:Raz mode select

+ ABXX:XX id Chip ID

+ > 新添加的命令 20170308

+ ACA0:SC336=> Select latched

+ ACA1:SC336=>Select direct output

+ ACB0:SC575=>Select Channel Trigger selected by Read Register

+ ACB1:SC575=>Select Channel Trigger selected by NOR64

+ > 新添加命令结束 20170308

+ ADXX:XX->Mask Channel

+ AE0X:Select Mask Discri

  + 0:None
  + 1:Discri0
  + 2:Discri1
  + 3:Discri0,1
  + 4:Discri2
  + 5:Discri0,2
  + 6:Discri1,2
  + 7:Discri0,1,2

+ AE1X:Select mask or unmask

  + 0:All channel unmask
  + 1:Mask selected channel and discriminator
  + 2:Unmask select channel and discriminator

## B类：采集参数，可以调整

+ B00X:Led灯


+ B1XX:XX为Start_Acq_Time的低八位


+ B2YY:YY为Start_Acq_Time的高八位，YYXX*25ns为Start_Acq的时间
+ B3XY: X:sw_hg<1:0>, sw_lg<1:0>

## C类：10-bit DAC和4-bit DAC码值设置

  + CXXX:10-bit DAC Code(这里是需要修改的) C000~CBFF
  + CC00~CFFF:4-bit DAC Code详细说明一下:
  + 从CC0X开始到CCFX，这里一共16个命令为1~16通道的4-bit DAC码值
  + 从CD0X开始到CDFX，16个命令为17~32通道的码值
  + CE0X~CEFX：33~48
  + CF0X~CFFX：49~64   

## D类：开始停止命令

  + D0A2:向芯片载入SC参数
  + D1Bx:选择哪个ASIC上out_T&H输出
  + D2F0:选择监控测试板上的功耗
  + D2F1:选择监控测试板上的out_T&H（默认）

## E类：S曲线测试(还没有完成，这段代码目前在新的逻辑中)

  + E0A0:选择ACQ
  + E0A1:选择S Curve Test
  + E0B0:选择单通道测试
  + E0B1:选择64通道测试
  + E0C0:单通道测试时从Ctest管脚输入信号
  + E0C1:单通道测试时选择从Input管脚输入信号
  + E0D0:选择触发率测试
  + E0D1:选择计数率测试
  + E0F0:SCurve 测试开始命令
  + E0F1:SCurve测试结束命令
  + E1XX:XX为单通道测试时的通道号
  + E2XX:选择最大计数：
    + 00：200
    + 01：1000
    + 02：2000
    + 03：5000
    + 04：10000
    + 05：20000
    + 06：40000
    + 07：50000
  + E3XX:选择计数率测试时间
    + 00:0.1s
    + 01:1s
    + 02:2s
    + 03:4s
    + 04:5s
    + 05:6s
    + 06:8s
    + 07:10s

## F类：采集命令

+ F0F0:开始
+ F0F1:停止
+ F0F2:复位Microroc AutoAcq和 RAMReadout模块
+ F0FA:清空USB FIFO

